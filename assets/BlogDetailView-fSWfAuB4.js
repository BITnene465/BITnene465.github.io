import{d as k,c as n,a as t,t as c,F as _,f as v,g,h as f,j as y,i as $,o,_ as m,r as h,k as S,b as B,n as C,l as b,m as N,p as I}from"./index-CEFTXmly.js";import{l as D,a as M}from"./blogLoader-f9a2nd35.js";const E={class:"post-content"},F={class:"post-meta"},H={class:"date"},O={class:"categories"},z=["innerHTML"],W={class:"keywords"},j={class:"post-navigation"},q=k({__name:"BlogContent",props:{post:{}},setup(p){return(s,e)=>{const d=y("RouterLink");return o(),n("article",E,[t("header",null,[t("h1",null,c(s.post.title),1),t("div",F,[t("span",H,c(s.post.date),1),t("div",O,[(o(!0),n(_,null,v(s.post.categories,(a,l)=>(o(),n("span",{key:l,class:"category"},c(a),1))),128))])])]),t("div",{class:"content",innerHTML:s.post.content},null,8,z),t("footer",null,[t("div",W,[(o(!0),n(_,null,v(s.post.keywords,(a,l)=>(o(),n("span",{key:l,class:"keyword"}," #"+c(a),1))),128))]),t("div",j,[g(d,{to:"/blog",class:"back-link"},{default:f(()=>e[0]||(e[0]=[$("返回文章列表")])),_:1})])])])}}}),x=m(q,[["__scopeId","data-v-48070c95"]]),A={class:"table-of-contents"},K={key:0},U=["href"],G={key:1,class:"no-toc"},J=k({__name:"BlogTableOfContents",props:{content:{}},setup(p){const s=p,e=h([]);function d(l){const u=new DOMParser().parseFromString(l,"text/html").querySelectorAll("h1, h2, h3"),P=[];return u.forEach(w=>{const L=w.id||"",R=w.textContent||"",V=parseInt(w.tagName.substring(1));L&&R&&P.push({id:L,text:R,level:V})}),P}function a(){e.value=d(s.content)}return S(()=>s.content,a,{immediate:!0}),B(a),(l,i)=>(o(),n("div",A,[e.value.length>0?(o(),n("ul",K,[(o(!0),n(_,null,v(e.value,(r,u)=>(o(),n("li",{key:u,class:C({"toc-h2":r.level===2,"toc-h3":r.level===3})},[t("a",{href:`#${r.id}`},c(r.text),9,U)],2))),128))])):(o(),n("p",G,"没有可用的目录"))]))}}),Q=m(J,[["__scopeId","data-v-206b5b6c"]]),X={class:"related-posts"},Y={key:0},Z={key:1,class:"no-related"},tt=k({__name:"BlogRelatedPosts",props:{currentPost:{}},setup(p){const s=p,e=h([]);return B(async()=>{const a=(await D()).filter(l=>{if(l.id===s.currentPost.id)return!1;const i=l.categories.some(u=>s.currentPost.categories.includes(u)),r=l.keywords.some(u=>s.currentPost.keywords.includes(u));return i||r});e.value=a.slice(0,5)}),(d,a)=>{const l=y("RouterLink");return o(),n("div",X,[e.value.length>0?(o(),n("ul",Y,[(o(!0),n(_,null,v(e.value,i=>(o(),n("li",{key:i.id},[g(l,{to:`/blog/${i.id}`,class:"related-post-link"},{default:f(()=>[$(c(i.title),1)]),_:2},1032,["to"])]))),128))])):(o(),n("p",Z,"没有相关文章"))])}}}),st=m(tt,[["__scopeId","data-v-9a89b529"]]),et={class:"sidebar-content"},ot={class:"sidebar-section"},nt={class:"categories-list"},at={class:"sidebar-section author-info"},lt={class:"author"},it={class:"author-name"},rt={class:"sidebar-section"},ct={class:"sidebar-section"},dt={class:"keywords-cloud"},ut=k({__name:"BlogSidebar",props:{post:{},position:{}},setup(p){return(s,e)=>{const d=y("RouterLink");return o(),n("aside",{class:C(["sidebar",s.position==="left"?"left-sidebar":"right-sidebar"])},[t("div",et,[s.position==="left"?(o(),n(_,{key:0},[e[1]||(e[1]=t("div",{class:"sidebar-header"},[t("h3",null,"文章目录")],-1)),g(Q,{content:s.post.content||""},null,8,["content"]),t("div",ot,[e[0]||(e[0]=t("h4",null,"分类",-1)),t("div",nt,[(o(!0),n(_,null,v(s.post.categories,a=>(o(),b(d,{key:a,to:`/blog?category=${encodeURIComponent(a)}`,class:"category-link"},{default:f(()=>[$(c(a),1)]),_:2},1032,["to"]))),128))])])],64)):(o(),n(_,{key:1},[t("div",at,[e[3]||(e[3]=t("h4",null,"关于作者",-1)),t("div",lt,[t("div",it,c(s.post.author||"BITnene465"),1),e[2]||(e[2]=t("div",{class:"author-description"},"个人网站创建者",-1))])]),t("div",rt,[e[4]||(e[4]=t("h4",null,"相关文章",-1)),g(st,{currentPost:s.post},null,8,["currentPost"])]),t("div",ct,[e[5]||(e[5]=t("h4",null,"关键词",-1)),t("div",dt,[(o(!0),n(_,null,v(s.post.keywords,(a,l)=>(o(),n("span",{key:l,class:"keyword-tag"}," #"+c(a),1))),128))])])],64))])],2)}}}),T=m(ut,[["__scopeId","data-v-561b4987"]]),_t={class:"blog-detail-view"},pt={class:"blog-top-navigation"},vt={class:"main-content"},ht={key:0,class:"loading"},gt={key:1,class:"not-found"},kt=k({__name:"BlogDetailView",setup(p){const s=h(null),e=h(!0),d=N(),a=h(window.innerWidth>=768);function l(){a.value=!a.value}return B(async()=>{const i=d.params.id;s.value=await M(i),e.value=!1,window.addEventListener("resize",()=>{window.innerWidth>=1024&&(a.value=!0)})}),(i,r)=>{const u=y("RouterLink");return o(),n("div",_t,[t("div",pt,[g(u,{to:"/blog",class:"back-button"},{default:f(()=>r[0]||(r[0]=[t("span",{class:"back-icon"},"←",-1),$(" 返回博客列表 ")])),_:1}),t("button",{class:"toggle-sidebar-button",onClick:l},c(a.value?"隐藏侧栏":"显示侧栏"),1)]),t("div",{class:C(["blog-container",{"sidebar-visible":a.value}])},[s.value&&!e.value?(o(),b(T,{key:0,position:"left",post:s.value},null,8,["post"])):I("",!0),t("main",vt,[e.value?(o(),n("div",ht," 加载中... ")):s.value?(o(),b(x,{key:2,post:s.value},null,8,["post"])):(o(),n("div",gt," 文章不存在或已被删除 "))]),s.value&&!e.value?(o(),b(T,{key:1,position:"right",post:s.value},null,8,["post"])):I("",!0)],2)])}}}),ft=m(kt,[["__scopeId","data-v-7ba6a5c8"]]);export{ft as default};
